{
  "info": {
    "_postman_id": "veterinaria-api-complete-2025",
    "name": "üè• Sistema Veterinaria API - Completo v2.0",
    "description": "Colecci√≥n completa y actualizada de APIs para el sistema de gesti√≥n veterinaria\n\n**Tecnolog√≠as:** Spring Boot 3.4.0 + Java 21 LTS\n**Base de datos:** MySQL\n**Autenticaci√≥n:** JWT\n\n**Documentaci√≥n:** Ver POSTMAN_TESTING_GUIDE.md",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "ü©∫ Estado del Sistema",
      "description": "Endpoints para verificar el estado y salud del sistema",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health",
              "host": ["{{base_url}}"],
              "path": ["health"]
            },
            "description": "Verifica que el sistema est√© funcionando correctamente"
          }
        },
        {
          "name": "System Info",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/info",
              "host": ["{{base_url}}"],
              "path": ["info"]
            },
            "description": "Obtiene informaci√≥n detallada del sistema (versi√≥n, Java, Spring Boot)"
          }
        }
      ]
    },
    {
      "name": "üîê Autenticaci√≥n",
      "description": "Sistema de autenticaci√≥n JWT con roles",
      "item": [
        {
          "name": "1. Login Admin",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('jwt_token', response.token);",
                  "    pm.environment.set('user_id', response.id);",
                  "    pm.environment.set('username', response.username);",
                  "    console.log('‚úÖ Token JWT guardado:', response.token);",
                  "    pm.test('Login exitoso', function () {",
                  "        pm.expect(response.token).to.be.a('string');",
                  "        pm.expect(response.username).to.eql('admin');",
                  "    });",
                  "} else {",
                  "    pm.test('Error en login', function () {",
                  "        pm.expect.fail('Login fall√≥ con c√≥digo: ' + pm.response.code);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"admin\",\n    \"password\": \"123456\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/signin",
              "host": ["{{base_url}}"],
              "path": ["auth", "signin"]
            },
            "description": "Autentica usuario administrador y guarda JWT token"
          }
        },
        {
          "name": "2. Registro Cliente",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"documento\": \"98765432\",\n    \"tipoDocumento\": \"CC\",\n    \"username\": \"cliente_test\",\n    \"email\": \"cliente@test.com\",\n    \"password\": \"cliente123\",\n    \"nombres\": \"Juan Carlos\",\n    \"apellidos\": \"P√©rez Gonz√°lez\",\n    \"telefono\": \"3001234567\",\n    \"direccion\": \"Calle 123 #45-67\",\n    \"roles\": [\"CLIENTE\"]\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/signup",
              "host": ["{{base_url}}"],
              "path": ["auth", "signup"]
            },
            "description": "Registra un nuevo cliente en el sistema"
          }
        },
        {
          "name": "3. Login Veterinario",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('jwt_token_vet', response.token);",
                  "    console.log('‚úÖ Token veterinario guardado');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"vet1\",\n    \"password\": \"vet123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/signin",
              "host": ["{{base_url}}"],
              "path": ["auth", "signin"]
            },
            "description": "Login para usuario veterinario"
          }
        }
      ]
    },
    {
      "name": "üìà Dashboard",
      "description": "Estad√≠sticas y m√©tricas del sistema",
      "item": [
        {
          "name": "Estad√≠sticas Dashboard",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/dashboard/stats",
              "host": ["{{base_url}}"],
              "path": ["dashboard", "stats"]
            },
            "description": "Obtiene estad√≠sticas generales del sistema (usuarios, mascotas, citas, etc.)"
          }
        }
      ]
    },
    {
      "name": "üë• Usuarios",
      "description": "Gesti√≥n completa de usuarios del sistema",
      "item": [
        {
          "name": "1. Listar Usuarios",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/usuarios",
              "host": ["{{base_url}}"],
              "path": ["usuarios"]
            },
            "description": "Obtiene lista de todos los usuarios del sistema"
          }
        },
        {
          "name": "2. Usuario por Documento",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/usuarios/12345678",
              "host": ["{{base_url}}"],
              "path": ["usuarios", "12345678"]
            },
            "description": "Obtiene usuario por n√∫mero de documento"
          }
        },
        {
          "name": "3. Usuarios Activos",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/usuarios/activos",
              "host": ["{{base_url}}"],
              "path": ["usuarios", "activos"]
            },
            "description": "Lista solo usuarios activos"
          }
        },
        {
          "name": "4. Crear Veterinario",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"documento\": \"11223355\",\n    \"tipoDocumento\": \"CC\",\n    \"username\": \"dr_martinez\",\n    \"email\": \"martinez@veterinaria.com\",\n    \"password\": \"martinez123\",\n    \"nombres\": \"Carlos Alberto\",\n    \"apellidos\": \"Mart√≠nez L√≥pez\",\n    \"telefono\": \"3009876543\",\n    \"direccion\": \"Avenida 80 #50-30\",\n    \"roles\": [\"VETERINARIO\"]\n}"
            },
            "url": {
              "raw": "{{base_url}}/usuarios",
              "host": ["{{base_url}}"],
              "path": ["usuarios"]
            },
            "description": "Crea un nuevo usuario veterinario"
          }
        },
        {
          "name": "5. Crear Recepcionista",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"documento\": \"33445566\",\n    \"tipoDocumento\": \"CC\",\n    \"username\": \"recepcion1\",\n    \"email\": \"recepcion@veterinaria.com\",\n    \"password\": \"recepcion123\",\n    \"nombres\": \"Mar√≠a Elena\",\n    \"apellidos\": \"Garc√≠a Rodr√≠guez\",\n    \"telefono\": \"3005551234\",\n    \"direccion\": \"Carrera 15 #32-18\",\n    \"roles\": [\"RECEPCIONISTA\"]\n}"
            },
            "url": {
              "raw": "{{base_url}}/usuarios",
              "host": ["{{base_url}}"],
              "path": ["usuarios"]
            },
            "description": "Crea un nuevo usuario recepcionista"
          }
        },
        {
          "name": "6. Actualizar Usuario",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"nombres\": \"Carlos Alberto\",\n    \"apellidos\": \"Mart√≠nez L√≥pez\",\n    \"telefono\": \"3009876543\",\n    \"direccion\": \"Avenida 80 #50-30 Apt 501\",\n    \"email\": \"carlos.martinez@veterinaria.com\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/usuarios/11223355",
              "host": ["{{base_url}}"],
              "path": ["usuarios", "11223355"]
            },
            "description": "Actualiza informaci√≥n de un usuario"
          }
        },
        {
          "name": "7. Desactivar Usuario",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/usuarios/98765432/desactivar",
              "host": ["{{base_url}}"],
              "path": ["usuarios", "98765432", "desactivar"]
            },
            "description": "Desactiva un usuario del sistema"
          }
        },
        {
          "name": "8. Contar Usuarios",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/usuarios/count",
              "host": ["{{base_url}}"],
              "path": ["usuarios", "count"]
            },
            "description": "Obtiene el total de usuarios registrados"
          }
        }
      ]
    },
    {
      "name": "üè• Veterinarias",
      "description": "Gesti√≥n de sucursales veterinarias",
      "item": [
        {
          "name": "1. Listar Veterinarias",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/veterinarias",
              "host": ["{{base_url}}"],
              "path": ["veterinarias"]
            },
            "description": "Lista todas las veterinarias registradas"
          }
        },
        {
          "name": "2. Veterinarias Activas",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/veterinarias/activas",
              "host": ["{{base_url}}"],
              "path": ["veterinarias", "activas"]
            },
            "description": "Lista solo veterinarias activas"
          }
        },
        {
          "name": "3. Crear Veterinaria Principal",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"nombre\": \"Veterinaria Central\",\n    \"direccion\": \"Calle 100 #50-25\",\n    \"telefono\": \"6017001234\",\n    \"email\": \"central@veterinaria.com\",\n    \"ciudad\": \"Bogot√°\",\n    \"descripcion\": \"Sede principal con todos los servicios especializados\",\n    \"servicios\": \"Consulta general, Cirug√≠a, Hospitalizaci√≥n, Radiolog√≠a, Laboratorio, Peluquer√≠a\",\n    \"horarioAtencion\": \"Lunes a Viernes: 7:00 AM - 8:00 PM, S√°bados: 8:00 AM - 6:00 PM, Domingos: 9:00 AM - 4:00 PM\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/veterinarias",
              "host": ["{{base_url}}"],
              "path": ["veterinarias"]
            },
            "description": "Crea la veterinaria principal"
          }
        },
        {
          "name": "4. Crear Veterinaria Norte",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"nombre\": \"Veterinaria Norte\",\n    \"direccion\": \"Calle 170 #15-25\",\n    \"telefono\": \"6012345678\",\n    \"email\": \"norte@veterinaria.com\",\n    \"ciudad\": \"Bogot√°\",\n    \"descripcion\": \"Sucursal norte especializada en medicina felina y canina\",\n    \"servicios\": \"Consulta general, Cirug√≠a menor, Vacunaci√≥n, Peluquer√≠a, Guarder√≠a\",\n    \"horarioAtencion\": \"Lunes a Viernes: 8:00 AM - 6:00 PM, S√°bados: 8:00 AM - 4:00 PM\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/veterinarias",
              "host": ["{{base_url}}"],
              "path": ["veterinarias"]
            },
            "description": "Crea sucursal veterinaria del norte"
          }
        },
        {
          "name": "5. Veterinaria por ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/veterinarias/1",
              "host": ["{{base_url}}"],
              "path": ["veterinarias", "1"]
            },
            "description": "Obtiene una veterinaria espec√≠fica por ID"
          }
        },
        {
          "name": "6. Contar Veterinarias",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/veterinarias/count",
              "host": ["{{base_url}}"],
              "path": ["veterinarias", "count"]
            },
            "description": "Cuenta total de veterinarias registradas"
          }
        }
      ]
    },
    {
      "name": "üêï Mascotas",
      "description": "Gesti√≥n completa de mascotas",
      "item": [
        {
          "name": "1. Listar Mascotas",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/mascotas",
              "host": ["{{base_url}}"],
              "path": ["mascotas"]
            },
            "description": "Lista todas las mascotas registradas"
          }
        },
        {
          "name": "2. Crear Mascota - Luna",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"nombre\": \"Luna\",\n    \"especie\": \"Perro\",\n    \"raza\": \"Golden Retriever\",\n    \"sexo\": \"Hembra\",\n    \"fechaNacimiento\": \"2020-05-15\",\n    \"color\": \"Dorado\",\n    \"peso\": 25.5,\n    \"observaciones\": \"Muy sociable y activa, le encanta jugar con ni√±os\",\n    \"propietario\": {\n        \"documento\": \"44332211\"\n    }\n}"
            },
            "url": {
              "raw": "{{base_url}}/mascotas",
              "host": ["{{base_url}}"],
              "path": ["mascotas"]
            },
            "description": "Crea una nueva mascota (Golden Retriever)"
          }
        },
        {
          "name": "3. Crear Mascota - Max",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"nombre\": \"Max\",\n    \"especie\": \"Perro\",\n    \"raza\": \"Pastor Alem√°n\",\n    \"sexo\": \"Macho\",\n    \"fechaNacimiento\": \"2019-08-20\",\n    \"color\": \"Negro y caf√©\",\n    \"peso\": 35.0,\n    \"observaciones\": \"Perro guardi√°n muy leal, necesita ejercicio diario\",\n    \"propietario\": {\n        \"documento\": \"98765432\"\n    }\n}"
            },
            "url": {
              "raw": "{{base_url}}/mascotas",
              "host": ["{{base_url}}"],
              "path": ["mascotas"]
            },
            "description": "Crea una segunda mascota (Pastor Alem√°n)"
          }
        },
        {
          "name": "4. Crear Mascota - Miau",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"nombre\": \"Miau\",\n    \"especie\": \"Gato\",\n    \"raza\": \"Siam√©s\",\n    \"sexo\": \"Hembra\",\n    \"fechaNacimiento\": \"2021-03-10\",\n    \"color\": \"Crema con puntos oscuros\",\n    \"peso\": 4.2,\n    \"observaciones\": \"Gata muy tranquila, le gusta dormir al sol\",\n    \"propietario\": {\n        \"documento\": \"44332211\"\n    }\n}"
            },
            "url": {
              "raw": "{{base_url}}/mascotas",
              "host": ["{{base_url}}"],
              "path": ["mascotas"]
            },
            "description": "Crea una mascota felina (Siam√©s)"
          }
        },
        {
          "name": "5. Mascotas por Propietario",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/mascotas/propietario/44332211",
              "host": ["{{base_url}}"],
              "path": ["mascotas", "propietario", "44332211"]
            },
            "description": "Lista mascotas de un propietario espec√≠fico"
          }
        },
        {
          "name": "6. Mascota por ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/mascotas/1",
              "host": ["{{base_url}}"],
              "path": ["mascotas", "1"]
            },
            "description": "Obtiene informaci√≥n detallada de una mascota"
          }
        },
        {
          "name": "7. Actualizar Mascota",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"peso\": 26.0,\n    \"observaciones\": \"Muy sociable y activa, le encanta jugar con ni√±os. √öltima revisi√≥n: peso ideal\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/mascotas/1",
              "host": ["{{base_url}}"],
              "path": ["mascotas", "1"]
            },
            "description": "Actualiza informaci√≥n de una mascota"
          }
        },
        {
          "name": "8. Contar Mascotas",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/mascotas/count",
              "host": ["{{base_url}}"],
              "path": ["mascotas", "count"]
            },
            "description": "Cuenta total de mascotas registradas"
          }
        }
      ]
    },
    {
      "name": "üìÖ Citas",
      "description": "Sistema completo de gesti√≥n de citas",
      "item": [
        {
          "name": "1. Listar Citas",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/citas",
              "host": ["{{base_url}}"],
              "path": ["citas"]
            },
            "description": "Lista todas las citas programadas"
          }
        },
        {
          "name": "2. Crear Cita - Luna Vacunaci√≥n",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"fechaHora\": \"2025-10-25T10:00:00\",\n    \"motivo\": \"Consulta de rutina y vacunaci√≥n anual\",\n    \"observaciones\": \"Primera consulta del a√±o, revisar cartilla de vacunaci√≥n\",\n    \"mascota\": {\n        \"id\": 1\n    },\n    \"veterinario\": {\n        \"documento\": \"11223344\"\n    },\n    \"cliente\": {\n        \"documento\": \"44332211\"\n    },\n    \"veterinaria\": {\n        \"id\": 1\n    }\n}"
            },
            "url": {
              "raw": "{{base_url}}/citas",
              "host": ["{{base_url}}"],
              "path": ["citas"]
            },
            "description": "Crea cita para vacunaci√≥n de Luna"
          }
        },
        {
          "name": "3. Crear Cita - Max Revisi√≥n",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"fechaHora\": \"2025-10-25T15:30:00\",\n    \"motivo\": \"Revisi√≥n general y control de peso\",\n    \"observaciones\": \"El propietario reporta que Max ha estado menos activo\",\n    \"mascota\": {\n        \"id\": 2\n    },\n    \"veterinario\": {\n        \"documento\": \"11223355\"\n    },\n    \"cliente\": {\n        \"documento\": \"98765432\"\n    },\n    \"veterinaria\": {\n        \"id\": 1\n    }\n}"
            },
            "url": {
              "raw": "{{base_url}}/citas",
              "host": ["{{base_url}}"],
              "path": ["citas"]
            },
            "description": "Crea cita de revisi√≥n para Max"
          }
        },
        {
          "name": "4. Citas de Hoy",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/citas/hoy",
              "host": ["{{base_url}}"],
              "path": ["citas", "hoy"]
            },
            "description": "Lista las citas programadas para hoy"
          }
        },
        {
          "name": "5. Citas por Cliente",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/citas/cliente/44332211",
              "host": ["{{base_url}}"],
              "path": ["citas", "cliente", "44332211"]
            },
            "description": "Lista citas de un cliente espec√≠fico"
          }
        },
        {
          "name": "6. Citas por Veterinario",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/citas/veterinario/11223344",
              "host": ["{{base_url}}"],
              "path": ["citas", "veterinario", "11223344"]
            },
            "description": "Lista citas asignadas a un veterinario"
          }
        },
        {
          "name": "7. Confirmar Cita",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/citas/1/confirmar",
              "host": ["{{base_url}}"],
              "path": ["citas", "1", "confirmar"]
            },
            "description": "Confirma una cita programada"
          }
        },
        {
          "name": "8. Cancelar Cita",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/citas/2/cancelar",
              "host": ["{{base_url}}"],
              "path": ["citas", "2", "cancelar"]
            },
            "description": "Cancela una cita programada"
          }
        },
        {
          "name": "9. Completar Cita",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/citas/1/completar",
              "host": ["{{base_url}}"],
              "path": ["citas", "1", "completar"]
            },
            "description": "Marca una cita como completada"
          }
        },
        {
          "name": "10. Contar Citas",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/citas/count",
              "host": ["{{base_url}}"],
              "path": ["citas", "count"]
            },
            "description": "Cuenta total de citas en el sistema"
          }
        }
      ]
    },
    {
      "name": "üìã Historia Cl√≠nica",
      "description": "Gesti√≥n de historias cl√≠nicas y registros m√©dicos",
      "item": [
        {
          "name": "1. Listar Historias",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/historias-clinicas",
              "host": ["{{base_url}}"],
              "path": ["historias-clinicas"]
            },
            "description": "Lista todas las historias cl√≠nicas"
          }
        },
        {
          "name": "2. Crear Historia - Luna Vacunaci√≥n",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"diagnostico\": \"Estado de salud excelente\",\n    \"tratamiento\": \"Vacunaci√≥n anual completa (Puppy, Parvovirus, Distemper)\",\n    \"observaciones\": \"Mascota en excelente condici√≥n f√≠sica. Vacunaci√≥n al d√≠a. Se recomienda continuar con ejercicio regular.\",\n    \"peso\": 26.0,\n    \"temperatura\": 38.2,\n    \"frecuenciaCardiaca\": 75,\n    \"frecuenciaRespiratoria\": 18,\n    \"medicamentos\": \"Vacuna anual aplicada. Pr√≥xima vacunaci√≥n en 12 meses.\",\n    \"mascota\": {\n        \"id\": 1\n    },\n    \"veterinario\": {\n        \"documento\": \"11223344\"\n    },\n    \"cita\": {\n        \"id\": 1\n    }\n}"
            },
            "url": {
              "raw": "{{base_url}}/historias-clinicas",
              "host": ["{{base_url}}"],
              "path": ["historias-clinicas"]
            },
            "description": "Crea historia cl√≠nica para Luna despu√©s de vacunaci√≥n"
          }
        },
        {
          "name": "3. Crear Historia - Max Consulta",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"diagnostico\": \"Ligero sobrepeso, artritis leve en articulaciones posteriores\",\n    \"tratamiento\": \"Dieta balanceada baja en calor√≠as, ejercicio moderado, suplemento para articulaciones\",\n    \"observaciones\": \"Se observa disminuci√≥n en actividad debido a molestias articulares. Propietario reporta menos energ√≠a para jugar.\",\n    \"peso\": 37.5,\n    \"temperatura\": 38.5,\n    \"frecuenciaCardiaca\": 85,\n    \"frecuenciaRespiratoria\": 22,\n    \"medicamentos\": \"Glucosamina + Condroitina: 1 tableta cada 12 horas con alimento por 30 d√≠as\",\n    \"mascota\": {\n        \"id\": 2\n    },\n    \"veterinario\": {\n        \"documento\": \"11223355\"\n    },\n    \"cita\": {\n        \"id\": 2\n    }\n}"
            },
            "url": {
              "raw": "{{base_url}}/historias-clinicas",
              "host": ["{{base_url}}"],
              "path": ["historias-clinicas"]
            },
            "description": "Crea historia cl√≠nica para Max con diagn√≥stico de sobrepeso"
          }
        },
        {
          "name": "4. Historias por Mascota",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/historias-clinicas/mascota/1",
              "host": ["{{base_url}}"],
              "path": ["historias-clinicas", "mascota", "1"]
            },
            "description": "Lista historias cl√≠nicas de una mascota espec√≠fica"
          }
        },
        {
          "name": "5. Historias por Veterinario",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/historias-clinicas/veterinario/11223344",
              "host": ["{{base_url}}"],
              "path": ["historias-clinicas", "veterinario", "11223344"]
            },
            "description": "Lista historias cl√≠nicas atendidas por un veterinario"
          }
        },
        {
          "name": "6. Historia por ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/historias-clinicas/1",
              "host": ["{{base_url}}"],
              "path": ["historias-clinicas", "1"]
            },
            "description": "Obtiene una historia cl√≠nica espec√≠fica"
          }
        },
        {
          "name": "7. Actualizar Historia",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"observaciones\": \"Mascota en excelente condici√≥n f√≠sica. Vacunaci√≥n al d√≠a. Se recomienda continuar con ejercicio regular. ACTUALIZACI√ìN: Propietario reporta excelente comportamiento post-vacunaci√≥n.\",\n    \"medicamentos\": \"Vacuna anual aplicada. Pr√≥xima vacunaci√≥n en 12 meses. Sin reacciones adversas.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/historias-clinicas/1",
              "host": ["{{base_url}}"],
              "path": ["historias-clinicas", "1"]
            },
            "description": "Actualiza informaci√≥n de una historia cl√≠nica"
          }
        },
        {
          "name": "8. Contar Historias",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/historias-clinicas/count",
              "host": ["{{base_url}}"],
              "path": ["historias-clinicas", "count"]
            },
            "description": "Cuenta total de historias cl√≠nicas registradas"
          }
        }
      ]
    },
    {
      "name": "üìä Reportes",
      "description": "Sistema de generaci√≥n de reportes y an√°lisis",
      "item": [
        {
          "name": "1. Listar Reportes",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/reportes",
              "host": ["{{base_url}}"],
              "path": ["reportes"]
            },
            "description": "Lista todos los reportes generados"
          }
        },
        {
          "name": "2. Generar Reporte de Citas",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/reportes/generar-citas?fechaInicio=2025-10-01T00:00:00&fechaFin=2025-10-31T23:59:59",
              "host": ["{{base_url}}"],
              "path": ["reportes", "generar-citas"],
              "query": [
                {
                  "key": "fechaInicio",
                  "value": "2025-10-01T00:00:00"
                },
                {
                  "key": "fechaFin",
                  "value": "2025-10-31T23:59:59"
                }
              ]
            },
            "description": "Genera reporte de citas en un rango de fechas"
          }
        },
        {
          "name": "3. Generar Reporte de Mascotas",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/reportes/generar-mascotas",
              "host": ["{{base_url}}"],
              "path": ["reportes", "generar-mascotas"]
            },
            "description": "Genera reporte general de mascotas registradas"
          }
        },
        {
          "name": "4. Generar Reporte de Usuarios",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/reportes/generar-usuarios",
              "host": ["{{base_url}}"],
              "path": ["reportes", "generar-usuarios"]
            },
            "description": "Genera reporte de usuarios por roles"
          }
        },
        {
          "name": "5. Generar Reporte de Ingresos",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/reportes/generar-ingresos?fechaInicio=2025-10-01T00:00:00&fechaFin=2025-10-31T23:59:59",
              "host": ["{{base_url}}"],
              "path": ["reportes", "generar-ingresos"],
              "query": [
                {
                  "key": "fechaInicio",
                  "value": "2025-10-01T00:00:00"
                },
                {
                  "key": "fechaFin",
                  "value": "2025-10-31T23:59:59"
                }
              ]
            },
            "description": "Genera reporte de ingresos por servicios"
          }
        },
        {
          "name": "6. Reporte por ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/reportes/1",
              "host": ["{{base_url}}"],
              "path": ["reportes", "1"]
            },
            "description": "Obtiene un reporte espec√≠fico por ID"
          }
        }
      ]
    },
    {
      "name": "üîç B√∫squedas",
      "description": "Sistema avanzado de b√∫squedas y filtros",
      "item": [
        {
          "name": "1. B√∫squeda Global",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/search/global?query=Luna",
              "host": ["{{base_url}}"],
              "path": ["search", "global"],
              "query": [
                {
                  "key": "query",
                  "value": "Luna"
                }
              ]
            },
            "description": "B√∫squeda global en todos los m√≥dulos"
          }
        },
        {
          "name": "2. B√∫squeda de Mascotas - Por Especie",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/search/mascotas?especie=Perro&activo=true",
              "host": ["{{base_url}}"],
              "path": ["search", "mascotas"],
              "query": [
                {
                  "key": "especie",
                  "value": "Perro"
                },
                {
                  "key": "activo",
                  "value": "true"
                }
              ]
            },
            "description": "B√∫squeda de mascotas filtrada por especie"
          }
        },
        {
          "name": "3. B√∫squeda de Mascotas - Por Raza",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/search/mascotas?raza=Golden Retriever",
              "host": ["{{base_url}}"],
              "path": ["search", "mascotas"],
              "query": [
                {
                  "key": "raza",
                  "value": "Golden Retriever"
                }
              ]
            },
            "description": "B√∫squeda de mascotas por raza espec√≠fica"
          }
        },
        {
          "name": "4. B√∫squeda de Citas - Por Estado",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/search/citas?estado=PROGRAMADA",
              "host": ["{{base_url}}"],
              "path": ["search", "citas"],
              "query": [
                {
                  "key": "estado",
                  "value": "PROGRAMADA"
                }
              ]
            },
            "description": "B√∫squeda de citas por estado"
          }
        },
        {
          "name": "5. B√∫squeda de Citas - Por Fecha",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/search/citas?fechaInicio=2025-10-25&fechaFin=2025-10-25",
              "host": ["{{base_url}}"],
              "path": ["search", "citas"],
              "query": [
                {
                  "key": "fechaInicio",
                  "value": "2025-10-25"
                },
                {
                  "key": "fechaFin",
                  "value": "2025-10-25"
                }
              ]
            },
            "description": "B√∫squeda de citas por rango de fechas"
          }
        },
        {
          "name": "6. B√∫squeda de Usuarios - Por Rol",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/search/usuarios?rol=VETERINARIO&activo=true",
              "host": ["{{base_url}}"],
              "path": ["search", "usuarios"],
              "query": [
                {
                  "key": "rol",
                  "value": "VETERINARIO"
                },
                {
                  "key": "activo",
                  "value": "true"
                }
              ]
            },
            "description": "B√∫squeda de usuarios por rol y estado"
          }
        },
        {
          "name": "7. B√∫squeda de Historias - Por Diagn√≥stico",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/search/historias-clinicas?diagnostico=sobrepeso",
              "host": ["{{base_url}}"],
              "path": ["search", "historias-clinicas"],
              "query": [
                {
                  "key": "diagnostico",
                  "value": "sobrepeso"
                }
              ]
            },
            "description": "B√∫squeda de historias cl√≠nicas por diagn√≥stico"
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Pre-request global script",
          "console.log('üöÄ Ejecutando request a:', pm.request.url);"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Test global script",
          "pm.test('Status code is not 500', function () {",
          "    pm.expect(pm.response.code).to.not.equal(500);",
          "});",
          "",
          "pm.test('Response time is less than 2000ms', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(2000);",
          "});",
          "",
          "if (pm.response.code === 401) {",
          "    console.log('‚ö†Ô∏è Error 401: Token JWT inv√°lido o expirado');",
          "}",
          "",
          "if (pm.response.code === 403) {",
          "    console.log('‚ö†Ô∏è Error 403: Sin permisos suficientes');",
          "}",
          "",
          "console.log('‚úÖ Response status:', pm.response.code, pm.response.status);"
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8080/api",
      "type": "string",
      "description": "URL base de la API del sistema veterinaria"
    },
    {
      "key": "jwt_token",
      "value": "",
      "type": "string",
      "description": "Token JWT para autenticaci√≥n (se llena autom√°ticamente)"
    },
    {
      "key": "jwt_token_vet",
      "value": "",
      "type": "string",
      "description": "Token JWT para usuario veterinario"
    },
    {
      "key": "user_id",
      "value": "",
      "type": "string",
      "description": "ID del usuario logueado"
    },
    {
      "key": "username",
      "value": "",
      "type": "string",
      "description": "Nombre de usuario logueado"
    }
  ]
}